<!--
  Generated template for the Task page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="dark">
    <ion-title>快速任务</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="reloadTaskList()">
        <ion-icon name="refresh"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <div class="empty-result-tips-container" *ngIf="emptyResult">
    <div class="empty-result-tips">
      没有任务，等会再来吧！
    </div>
  </div>
  <ion-card *ngFor="let task of task_list.progress" (click)="gotoTaskDetail(task)">
    <ion-item>
      <ion-avatar item-left>
        <img [src]="task.icon" />
      </ion-avatar>
      <h2>{{task.keywords}}</h2>
      <p class="task-stats">{{task.start_time}} {{task.put_in_count - task.grab_count < 0 ? 0 : task.put_in_count - task.grab_count}}份 {{ task.special_price == '0.0' ? '100%奖励' : '非100%奖励' }}</p>
      <ion-badge color="danger" item-right>进行中</ion-badge>
    </ion-item>
  </ion-card>
  <ion-card *ngFor="let task of task_list.current" (click)="grabTask(task.id)">
    <ion-item>
      <ion-avatar item-left>
        <img [src]="task.icon" />
      </ion-avatar>
      <h2>{{task.keywords}}</h2>
      <p class="task-stats">{{task.start_time}} {{task.put_in_count - task.grab_count < 0 ? 0 : task.put_in_count - task.grab_count}}份 {{ task.special_price == '0.0' ? '100%奖励' : '非100%奖励' }}</p>
      <ion-badge color="danger" item-right>+{{task.price}}</ion-badge>
    </ion-item>
  </ion-card>
  <div *ngIf="task_list.after.length > 0" class="tip-header">以下是即将开始的任务</div>
  <ion-card *ngFor="let task of task_list.after">
    <ion-item>
      <ion-avatar item-left>
        <img [src]="task.icon" />
      </ion-avatar>
      <h2>{{task.keywords}}</h2>
      <p class="task-stats">{{task.start_time}} {{task.put_in_count - task.grab_count < 0 ? 0 : task.put_in_count - task.grab_count}}份 {{ task.special_price == '0.0' ? '100%奖励' : '非100%奖励' }}</p>
      <ion-badge color="danger" item-right>+{{task.price}}</ion-badge>
    </ion-item>
  </ion-card>
    <div *ngIf="task_list.completed.length > 0" class="tip-header">以下是已经完成的任务</div>
  <ion-card *ngFor="let task of task_list.completed">
    <ion-item>
      <ion-avatar item-left>
        <img [src]="task.icon" />
      </ion-avatar>
      <h2>{{task.keywords}}</h2>
      <div item-right style="color:grey;">已完成</div>
    </ion-item>
  </ion-card>
</ion-content>
